!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}({0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){window.eventHub={events:{},emit:function(e,t){for(var n in this.events)n===e&&this.events[n].map(function(e){e.call(void 0,t)})},on:function(e,t){void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(t)}}}},1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){AV.init({appId:"IbKHNlRGRAFjYmmzC1gxhtdE-gzGzoHsz",appKey:"6SlQPqCcy8KwHVEhJpFeBFpG"})}},17:function(e,t,n){"use strict";var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};n(38);var r=s(n(1)),o=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var a={el:"#app",render:function(e){var t=this,n=e.song;n.cover?($(this.el).find(".page-cover").css("background-image","url("+n.cover+")"),$(this.el).find(".cover").css("background-image","url("+n.cover+")")):($(this.el).find(".page-cover").css("background-image","url(http://p9lfootse.bkt.clouddn.com/default-show.jpg)"),$(this.el).find(".cover").css("background-image","url(http://p9lfootse.bkt.clouddn.com/default-show.jpg})")),$(this.el).find("audio").attr("src",n.url),$(this.el).find(".song-description h1>.name").text(n.name+" - "),$(this.el).find(".song-description h1>.singer").text(n.singer);var i=n.lyrics;i&&($(this.el).find(".lines").empty(),i.split("\n").map(function(e){var n=document.createElement("p"),i=e.match(/\[([\d:.]+)\](.*)/);if(i){n.textContent=i[2];var r=i[1].split(":"),o=r[0],s=r[1],a=60*parseInt(o,10)+parseFloat(s,10);n.setAttribute("data-time",a)}else n.textContent=e;$(t.el).find(".lyric > .lines").append(n)}))},showLyric:function(e){for(var t=$(this.el).find(".lyric > .lines > p"),n=void 0,i=0;i<t.length;i++){if(i===t.length-1){n=t.eq(i);break}t.eq(i).attr("data-time");if(e<t.eq(i+1).attr("data-time")){n=t.eq(i);break}}var r=n.offset().top-$(this.el).find(".lyric >.lines").offset().top;$(this.el).find(".lyric > .lines").css("transform","translateY(-"+(r-24)+"px)"),n.addClass("active").siblings(".active").removeClass("active")},play:function(){$(this.el).find(".disc-container").addClass("playing"),$(this.el).find("audio")[0].play()},pause:function(){$(this.el).find(".disc-container").removeClass("playing"),$(this.el).find("audio")[0].pause()}},l={data:{song:{id:"",name:"",singer:"",url:"",cover:""}},get:function(e){var t=this;return new AV.Query("Song").get(e).then(function(e){i(t.data.song,i({id:e.id},e.attributes))})}},u={init:function(e,t){var n=this;this.view=e,this.model=t;var i=this.getSongId();this.model.get(i).then(function(){n.view.render(n.model.data),n.view.play(),$(n.view.el).find("audio")[0].paused&&$(n.view.el).find(".disc-container").removeClass("playing")}),this.bindEvents()},bindEvents:function(){var e=this;$(this.view.el).find(".icon-play").on("click",function(){e.view.play()}),$(this.view.el).find(".icon-pause").on("click",function(){e.view.pause()}),$(this.view.el).find("audio").on("ended",function(){e.view.pause()}),$(this.view.el).find("audio").on("timeupdate",function(t){e.view.showLyric(t.currentTarget.currentTime)})},getSongId:function(){var e=window.location.search;0===e.indexOf("?")&&(e=e.substring(1));for(var t=e.split("&").filter(function(e){return e}),n="",i=0;i<t.length;i++){var r=t[i].split("="),o=r[0],s=r[1];if("id"===o){n=s;break}}return n}};(0,r.default)(),(0,o.default)(),u.init(a,l)},38:function(e,t){}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbW1vbi9ldmVudC1odWIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbW1vbi9hdi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvc29uZy9wbGF5LXNvbmcuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ3aW5kb3ciLCJldmVudEh1YiIsImV2ZW50cyIsImVtaXQiLCJldmVudE5hbWUiLCJkYXRhIiwidGhpcyIsIm1hcCIsImZuIiwidW5kZWZpbmVkIiwib24iLCJwdXNoIiwiQVYiLCJpbml0IiwiYXBwSWQiLCJhcHBLZXkiLCJ2aWV3IiwiZWwiLCJyZW5kZXIiLCJfdGhpcyIsInNvbmciLCJjb3ZlciIsIiQiLCJmaW5kIiwiY3NzIiwiYXR0ciIsInVybCIsInRleHQiLCJzaW5nZXIiLCJseXJpY3MiLCJlbXB0eSIsInNwbGl0IiwibGluZUx5cmljIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwibWF0Y2hlcyIsIm1hdGNoIiwidGV4dENvbnRlbnQiLCJwYXJ0cyIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwibmV3VGltZSIsInBhcnNlSW50IiwicGFyc2VGbG9hdCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZCIsInNob3dMeXJpYyIsInRpbWUiLCIkYWxsUCIsIiRmaW5kUCIsImxlbmd0aCIsImVxIiwiaGVpZ2h0Iiwib2Zmc2V0IiwidG9wIiwiYWRkQ2xhc3MiLCJzaWJsaW5ncyIsInJlbW92ZUNsYXNzIiwicGxheSIsInBhdXNlIiwibW9kZWwiLCJpZCIsIl90aGlzMiIsIlF1ZXJ5IiwidGhlbiIsIl9leHRlbmRzIiwiYXR0cmlidXRlcyIsImNvbnRyb2xsZXIiLCJfdGhpczMiLCJnZXRTb25nSWQiLCJwYXVzZWQiLCJiaW5kRXZlbnRzIiwiX3RoaXM0IiwiZSIsImN1cnJlbnRUYXJnZXQiLCJjdXJyZW50VGltZSIsInNlYXJjaCIsImxvY2F0aW9uIiwiaW5kZXhPZiIsInN1YnN0cmluZyIsImFycmF5IiwiZmlsdGVyIiwidiIsImt2IiwiayIsIl9hdjIiLCJkZWZhdWx0IiwiX2V2ZW50SHViMiJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxhQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFB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RixFQUFFLEVBQUdBLEVBQUVnSCxFQUFNOUIsT0FBUWxGLElBQUksQ0FDL0IsSUFBSW1ILEVBQUtILEVBQU1oSCxHQUFHK0QsTUFBTSxLQUNwQnFELEVBQUlELEVBQUcsR0FDUEQsRUFBSUMsRUFBRyxHQUNYLEdBQVMsT0FBTkMsRUFBVyxDQUNadkIsRUFBS3FCLEVBQ0wsT0FJSixPQUFPckIsS0FJWCxFQUFBd0IsRUFBQUMsWUFDQSxFQUFBQyxFQUFBRCxXQUNBbkIsRUFBV3RELEtBQUtHLEVBQU00QyIsImZpbGUiOiJqcy9zb25nLWJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxNyk7XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpe1xyXG4gIC8vIOS6i+S7tuS4reW/gywg5Y+R5biD6K6i6ZiF5qih5byPXHJcbiAgd2luZG93LmV2ZW50SHViID0ge1xyXG4gICAgZXZlbnRzOiB7XHJcbiAgICAgIC8vIGV2ZW50MTogW2ZuMSwgZm4yLCAuLi5dXHJcbiAgICAgIC8vIGV2ZW50MjogW2ZuQSwgZm5CLCAuLi5dXHJcbiAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuICAgIGVtaXQoZXZlbnROYW1lLCBkYXRhKXsvL+WPkeW4gyjop6blj5Hkuovku7bvvIzpnIDopoHlj5HpgIHmlbDmja7ogIXpnIDopoHosIPnlKjlj5HluIMp77yM5om+5Yiw6YKj5Liq5qG277yM5oqK6YeM6Z2i55qE5Ye95pWw5YWo6YO9Y2FsbOS4gOmBje+8jGNhbGznmoTml7blgJnluKbkuKpkYXRhXHJcbiAgICAgIGZvcihsZXQga2V5IGluIHRoaXMuZXZlbnRzKXtcclxuICAgICAgICBpZihrZXkgPT09IGV2ZW50TmFtZSl7XHJcbiAgICAgICAgICB0aGlzLmV2ZW50c1trZXldLm1hcCgoZm4pID0+IHtcclxuICAgICAgICAgICAgZm4uY2FsbCh1bmRlZmluZWQsIGRhdGEpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIG9uKGV2ZW50TmFtZSwgZm4pey8v6K6i6ZiFKOaOpeaUtuS6i+S7tu+8jOaOpeaUtuaVsOaNruiAhemcgOimgeiwg+eUqOiuoumYhSks5oqK5L2g55qE5Ye95pWw5pS+5Yiw5LiA5Liq5qG26YeM6Z2iXHJcbiAgICAgIGlmKHRoaXMuZXZlbnRzW2V2ZW50TmFtZV0gPT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgdGhpcy5ldmVudHNbZXZlbnROYW1lXSA9IFtdXHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5ldmVudHNbZXZlbnROYW1lXS5wdXNoKGZuKVxyXG4gICAgfSxcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpe1xyXG4gIGxldCBBUFBfSUQgPSAnSWJLSE5sUkdSQUZqWW1tekMxZ3hodGRFLWd6R3pvSHN6JztcclxuICBsZXQgQVBQX0tFWSA9ICc2U2xRUHFDY3k4S3dIVkVoSnBGZUJGcEcnO1xyXG4gIEFWLmluaXQoe1xyXG4gICAgYXBwSWQ6IEFQUF9JRCxcclxuICAgIGFwcEtleTogQVBQX0tFWVxyXG4gIH0pO1xyXG59IiwiaW1wb3J0ICcuLi8uLi9jc3Mvc29uZy5jc3MnXG5pbXBvcnQgYXYgZnJvbSAnLi4vY29tbW9uL2F2J1xuaW1wb3J0IGV2ZW50SHViIGZyb20gJy4uL2NvbW1vbi9ldmVudC1odWInXG57XG4gIGxldCB2aWV3ID0ge1xuICAgIGVsOiAnI2FwcCcsXG4gICAgcmVuZGVyKGRhdGEpe1xuICAgICAgbGV0IHtzb25nfSA9IGRhdGFcbiAgICAgIGlmKHNvbmcuY292ZXIpe1xuICAgICAgICAkKHRoaXMuZWwpLmZpbmQoJy5wYWdlLWNvdmVyJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgYHVybCgke3NvbmcuY292ZXJ9KWApXG4gICAgICAgICQodGhpcy5lbCkuZmluZCgnLmNvdmVyJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgYHVybCgke3NvbmcuY292ZXJ9KWApXG4gICAgICB9ZWxzZXtcbiAgICAgICAgJCh0aGlzLmVsKS5maW5kKCcucGFnZS1jb3ZlcicpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsIGB1cmwoaHR0cDovL3A5bGZvb3RzZS5ia3QuY2xvdWRkbi5jb20vZGVmYXVsdC1zaG93LmpwZylgKVxuICAgICAgICAkKHRoaXMuZWwpLmZpbmQoJy5jb3ZlcicpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsIGB1cmwoaHR0cDovL3A5bGZvb3RzZS5ia3QuY2xvdWRkbi5jb20vZGVmYXVsdC1zaG93LmpwZ30pYClcbiAgICAgIH1cbiAgICAgICQodGhpcy5lbCkuZmluZCgnYXVkaW8nKS5hdHRyKCdzcmMnLCBzb25nLnVybClcbiAgICAgICQodGhpcy5lbCkuZmluZCgnLnNvbmctZGVzY3JpcHRpb24gaDE+Lm5hbWUnKS50ZXh0KGAke3NvbmcubmFtZX0gLSBgKVxuICAgICAgJCh0aGlzLmVsKS5maW5kKCcuc29uZy1kZXNjcmlwdGlvbiBoMT4uc2luZ2VyJykudGV4dChzb25nLnNpbmdlcilcbiAgICAgIGxldCB7bHlyaWNzfSA9IHNvbmdcbiAgICAgIGlmKGx5cmljcyl7XG4gICAgICAgICQodGhpcy5lbCkuZmluZCgnLmxpbmVzJykuZW1wdHkoKVxuICAgICAgICBseXJpY3Muc3BsaXQoJ1xcbicpLm1hcCgobGluZUx5cmljKSA9PiB7XG4gICAgICAgICAgbGV0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcbiAgICAgICAgICBsZXQgcmVnZXggPSAvXFxbKFtcXGQ6Ll0rKVxcXSguKikvXG4gICAgICAgICAgbGV0IG1hdGNoZXMgPSBsaW5lTHlyaWMubWF0Y2gocmVnZXgpXG4gICAgICAgICAgaWYobWF0Y2hlcyl7XG4gICAgICAgICAgICBwLnRleHRDb250ZW50ID0gbWF0Y2hlc1syXVxuICAgICAgICAgICAgbGV0IHRpbWUgPSBtYXRjaGVzWzFdXG4gICAgICAgICAgICBsZXQgcGFydHMgPSB0aW1lLnNwbGl0KCc6JylcbiAgICAgICAgICAgIGxldCBtaW51dGVzID0gcGFydHNbMF1cbiAgICAgICAgICAgIGxldCBzZWNvbmRzID0gcGFydHNbMV1cbiAgICAgICAgICAgIGxldCBuZXdUaW1lID0gcGFyc2VJbnQobWludXRlcywgMTApICogNjAgKyBwYXJzZUZsb2F0KHNlY29uZHMsIDEwKVxuICAgICAgICAgICAgcC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGltZScsIG5ld1RpbWUpXG4gICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBwLnRleHRDb250ZW50ID0gbGluZUx5cmljXG4gICAgICAgICAgfVxuICAgICAgICAgICQodGhpcy5lbCkuZmluZCgnLmx5cmljID4gLmxpbmVzJykuYXBwZW5kKHApXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSxcbiAgICBzaG93THlyaWModGltZSl7XG4gICAgICBsZXQgJGFsbFAgPSAkKHRoaXMuZWwpLmZpbmQoJy5seXJpYyA+IC5saW5lcyA+IHAnKVxuICAgICAgbGV0ICRmaW5kUFxuICAgICAgXG4gICAgICBmb3IobGV0IGkgPSAwOyBpIDwgJGFsbFAubGVuZ3RoOyBpKyspe1xuICAgICAgICBpZihpID09PSAkYWxsUC5sZW5ndGggLTEpe1xuICAgICAgICAgICRmaW5kUCA9ICRhbGxQLmVxKGkpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfSBlbHNle1xuICAgICAgICAgIGxldCBjdXJyZW50VGltZSA9ICRhbGxQLmVxKGkpLmF0dHIoJ2RhdGEtdGltZScpXG4gICAgICAgICAgbGV0IG5leHRUaW1lID0gJGFsbFAuZXEoaSArIDEpLmF0dHIoJ2RhdGEtdGltZScpXG4gICAgICAgICAgLy/ov5nph4zkuI3og73nlKhjdXJyZW50VGltZSA8PSB0aW1lICYmIHRpbWUgPCBuZXh0VGltZSnvvIzlm6DkuLrliY3lh6Dlj6XmrYzor43nmoTnmoR0aW1l5aSn5LqOMOeahOaXtuWAme+8jOS8muaJvuS4jeWIsOWvueW6lOeahHDvvIzku47ogIzmib7liLDmnIDlkI7kuIDkuKpw77yM5a+86Ie05LiA5byA5aeLbGluZXPlnZflsLHkuIrnp7tcbiAgICAgICAgICBpZih0aW1lIDwgbmV4dFRpbWUpe1xuICAgICAgICAgICAgJGZpbmRQID0gJGFsbFAuZXEoaSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgIFxuICAgICAgbGV0IHBIZWlnaHQgPSAkZmluZFAub2Zmc2V0KCkudG9wXG4gICAgICBsZXQgbGluZXNIZWlnaHQgPSAkKHRoaXMuZWwpLmZpbmQoJy5seXJpYyA+LmxpbmVzJykub2Zmc2V0KCkudG9wLy/ov5nph4znrpfnmoTmmK9saW5lc+i3neemu+mhtumDqOeahOmrmOW6pu+8jOiAjOS4jeaYr2x5cmlj6Led56a76aG26YOo55qE6auY5bqm77yM5Zug5Li65LiL6Z2i5piv5LiA5qyh5oCn56e75YqobGluZXPvvIhsaW5lc+S4iumdouWPquiDveacieS4gOS4qnRyYW5zZm9ybTp0cmFuc2xhdGVZ5bGe5oCn77yJ77yM6ICM5LiN5piv5Y+g5Yqg56e75Yqo77yB77yB77yBKioqKipcbiAgICAgIGxldCBoZWlnaHQgPSBwSGVpZ2h0IC0gbGluZXNIZWlnaHRcbiAgICAgICQodGhpcy5lbCkuZmluZCgnLmx5cmljID4gLmxpbmVzJykuY3NzKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlWSgtJHtoZWlnaHQgLSAyNH1weClgKVxuICAgICAgJGZpbmRQLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygnLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxuICAgIH0sXG4gICAgcGxheSgpe1xuICAgICAgJCh0aGlzLmVsKS5maW5kKCcuZGlzYy1jb250YWluZXInKS5hZGRDbGFzcygncGxheWluZycpXG4gICAgICAkKHRoaXMuZWwpLmZpbmQoJ2F1ZGlvJylbMF0ucGxheSgpXG4gICAgfSxcbiAgICBwYXVzZSgpe1xuICAgICAgJCh0aGlzLmVsKS5maW5kKCcuZGlzYy1jb250YWluZXInKS5yZW1vdmVDbGFzcygncGxheWluZycpXG4gICAgICAkKHRoaXMuZWwpLmZpbmQoJ2F1ZGlvJylbMF0ucGF1c2UoKVxuICAgIH1cbiAgfVxuXG4gIGxldCBtb2RlbCA9IHtcbiAgICBkYXRhOiB7XG4gICAgICBzb25nOntcbiAgICAgICAgaWQ6ICcnLFxuICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgc2luZ2VyOiAnJyxcbiAgICAgICAgdXJsOiAnJyxcbiAgICAgICAgY292ZXI6ICcnXG4gICAgICB9XG4gICAgfSxcbiAgICBnZXQoaWQpe1xuICAgICAgdmFyIHF1ZXJ5ID0gbmV3IEFWLlF1ZXJ5KCdTb25nJylcbiAgICAgIHJldHVybiBxdWVyeS5nZXQoaWQpLnRoZW4oKHNvbmcpID0+IHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmRhdGEuc29uZywgT2JqZWN0LmFzc2lnbih7aWQ6IHNvbmcuaWR9LCBzb25nLmF0dHJpYnV0ZXMpKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBsZXQgY29udHJvbGxlciA9IHtcbiAgICBpbml0KHZpZXcsIG1vZGVsKXtcbiAgICAgIHRoaXMudmlldyA9IHZpZXdcbiAgICAgIHRoaXMubW9kZWwgPSBtb2RlbFxuICAgICAgbGV0IGlkID0gdGhpcy5nZXRTb25nSWQoKVxuICAgICAgdGhpcy5tb2RlbC5nZXQoaWQpLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLnZpZXcucmVuZGVyKHRoaXMubW9kZWwuZGF0YSlcbiAgICAgICAgLy/lm6DkuLrnp7vliqjnq6/mtYHph4/nj43otLXvvIznpoHmraLoh6rliqjmkq3mlL7vvIzlv4XpobvlkozmiYvmnLrkuqTkupLlkI7miY3og73mkq3mlL7vvIzkuIvpnaLorr7nva7mkq3mlL7vvIzmlYXlnKjmiYvmnLrkuIrmnInlj6/og73kuIDlvIDlp4vmkq3mlL7kuI3lh7rmnaVcbiAgICAgICAgdGhpcy52aWV3LnBsYXkoKVxuICAgICAgICBpZigkKHRoaXMudmlldy5lbCkuZmluZCgnYXVkaW8nKVswXS5wYXVzZWQpe1xuICAgICAgICAgIC8v5rKh6Ieq5Yqo5pKt5pS+55qE5oOF5Ya1XG4gICAgICAgICAgJCh0aGlzLnZpZXcuZWwpLmZpbmQoJy5kaXNjLWNvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdwbGF5aW5nJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHRoaXMuYmluZEV2ZW50cygpXG4gICAgfSxcbiAgICBiaW5kRXZlbnRzKCl7XG4gICAgICAkKHRoaXMudmlldy5lbCkuZmluZCgnLmljb24tcGxheScpLm9uKCdjbGljaycsICgpPT57XG4gICAgICAgIHRoaXMudmlldy5wbGF5KClcbiAgICAgIH0pXG4gICAgICAkKHRoaXMudmlldy5lbCkuZmluZCgnLmljb24tcGF1c2UnKS5vbignY2xpY2snLCAoKT0+e1xuICAgICAgICB0aGlzLnZpZXcucGF1c2UoKVxuICAgICAgfSlcbiAgICAgICQodGhpcy52aWV3LmVsKS5maW5kKCdhdWRpbycpLm9uKCdlbmRlZCcsICgpPT57XG4gICAgICAgIHRoaXMudmlldy5wYXVzZSgpXG4gICAgICB9KVxuICAgICAgJCh0aGlzLnZpZXcuZWwpLmZpbmQoJ2F1ZGlvJykub24oJ3RpbWV1cGRhdGUnLCAoZSk9PntcbiAgICAgICAgdGhpcy52aWV3LnNob3dMeXJpYyhlLmN1cnJlbnRUYXJnZXQuY3VycmVudFRpbWUpXG4gICAgICB9KVxuICAgIH0sXG4gICAgZ2V0U29uZ0lkKCl7XG4gICAgICBsZXQgc2VhcmNoID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaFxuICAgICAgLy8g5p+l6K+i5Y+C5pWwc2VhcmNo5Y+v6IO9562J5LqOLOmcgOimgeino+aekDpcbiAgICAgIC8vID9pZD0yMzQzMjE0MjM0MjM0MzQzJmE9MSYmYj0yXG4gICAgICBpZihzZWFyY2guaW5kZXhPZignPycpID09PSAwKXtcbiAgICAgICAgc2VhcmNoID0gc2VhcmNoLnN1YnN0cmluZygxKVxuICAgICAgfVxuICAgICAgbGV0IGFycmF5ID0gc2VhcmNoLnNwbGl0KCcmJykuZmlsdGVyKCh2KSA9PiB7XG4gICAgICAgIC8vIHNlYXJjaC5zcGxpdCgnJicpID0+IFtcImlkPTIzNDMyMTQyMzQyMzQzNDNcIiwgXCJhPTFcIiwgXCJcIiwgXCJiPTJcIl0gXG4gICAgICAgIC8vIGZpdGVy5p2l6L+H5ruk56m65a2X56ym5LiyID0+IFtcImlkPTIzNDMyMTQyMzQyMzQzNDNcIiwgXCJhPTFcIiwgXCJiPTJcIl1cbiAgICAgICAgcmV0dXJuIHZcbiAgICAgIH0pXG5cbiAgICAgIGxldCBpZCA9ICcnXG4gICAgICBmb3IobGV0IGk9MDsgaTxhcnJheS5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGxldCBrdiA9IGFycmF5W2ldLnNwbGl0KCc9JylcbiAgICAgICAgbGV0IGsgPSBrdlswXVxuICAgICAgICBsZXQgdiA9IGt2WzFdXG4gICAgICAgIGlmKGsgPT09ICdpZCcpe1xuICAgICAgICAgIGlkID0gdlxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGlkXG4gICAgfVxuICB9XG5cbiAgYXYoKVxuICBldmVudEh1YigpXG4gIGNvbnRyb2xsZXIuaW5pdCh2aWV3LCBtb2RlbClcbn0iXSwic291cmNlUm9vdCI6IiJ9