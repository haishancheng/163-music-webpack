!function(e){var n={};function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(i,o,function(n){return e[n]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=6)}({0:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){window.eventHub={events:{},emit:function(e,n){for(var t in this.events)t===e&&this.events[t].map(function(e){e.call(void 0,n)})},on:function(e,n){void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(n)}}}},1:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){AV.init({appId:"IbKHNlRGRAFjYmmzC1gxhtdE-gzGzoHsz",appKey:"6SlQPqCcy8KwHVEhJpFeBFpG"})}},2:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){({init:function(e,n){this.view=e,this.model=n,this.bindEvents(),this.bindEventHub()},bindEvents:function(){$(this.view.el).on("click",function(){window.eventHub.emit("newSongSheet")})},bindEventHub:function(){var e=this;window.eventHub.on("selectSongSheet",function(){e.view.deActive()}),window.eventHub.on("newSongSheet",function(){e.view.active()}),window.eventHub.on("creatSongSheetSuccess",function(){e.view.active()}),window.eventHub.on("deleteSongSheet",function(){e.view.active()})}}).init({el:".newSongSheet",active:function(){$(this.el).addClass("active")},deActive:function(){$(this.el).removeClass("active")}},{})}},26:function(e,n){},3:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};n.default=function(){({init:function(e,n){this.view=e,this.model=n,this.view.render(this.model.data),this.bindEvents(),this.bindEventHub()},creatSongSheet:function(){var e=this,n={};["name","brief","cover"].map(function(t){n[t]=$(e.view.el).find('[name="'+t+'"]').val()}),this.model.create(n).then(function(){window.eventHub.emit("creatSongSheetSuccess",JSON.parse(JSON.stringify(e.model.data))),window.eventHub.emit("clearSongListAcitve",{songSheet:{name:"",cover:"",brief:"",id:""},songSheetSongs:[]}),e.view.reset()})},updateSongSheet:function(){var e=this,n={};["name","brief","cover"].map(function(t){n[t]=$(e.view.el).find('[name="'+t+'"]').val()}),this.model.update(n).then(function(){window.eventHub.emit("updateSongSheet",JSON.parse(JSON.stringify(e.model.data)))})},deleteSongSheet:function(){var e=this;this.model.delete(this.model.data).then(function(n){window.eventHub.emit("deleteSongSheet",{id:n}),window.eventHub.emit("clearSongListAcitve",{songSheet:{name:"",cover:"",brief:"",id:""},songSheetSongs:[]}),e.view.reset()})},bindEvents:function(){var e=this;$(this.view.el).on("click","li",function(n){var t=$(n.currentTarget).attr("data-song-id");e.model.data.songSheetSongs=e.model.data.songSheetSongs.filter(function(e){return e.id!==t}),e.view.renderSongListBox(e.model.data),window.eventHub.emit("deleteSong",JSON.parse(JSON.stringify(e.model.data)))}),$(this.view.el).on("click",".confirm",function(n){e.model.data.songSheet.id?e.updateSongSheet():e.creatSongSheet()}),$(this.view.el).on("click",".delete",function(n){e.model.data.songSheet.id&&e.deleteSongSheet()})},bindEventHub:function(){var e=this;window.eventHub.on("addSong",function(n){e.model.data.songSheetSongs=n.songSheetSongs,e.view.renderSongListBox(e.model.data)}),window.eventHub.on("selectSongSheet",function(n){e.model.data=n,e.view.render(e.model.data),e.view.renderSongListBox(e.model.data)}),window.eventHub.on("newSongSheet",function(){e.model.data.songSheet.id&&(e.model.data={songSheet:{name:"",cover:"",brief:"",id:""},songSheetSongs:[]},e.view.render(e.model.data),window.eventHub.emit("clearSongListAcitve",JSON.parse(JSON.stringify(e.model.data))))})}}).init({el:".editArea-wrapper",template:'\n      <div class="editArea">\n        <h1>新建歌单</h1>\n        <div class="row">\n          <label>歌单名称</label>\n          <input type="text" name="name" value="__name__">\n        </div>\n        <div class="row">\n          <label>歌单简介</label>\n          <textarea name="brief">__brief__</textarea>\n          </div>\n        <div class="row">\n          <label>封面外链</label>\n          <input type="text" name="cover" value="__cover__">\n        </div>\n        <div class="row">\n            <label>包含歌曲</label>\n            <ol class="songList-box"></ol>\n        </div>\n        <div class="button-wrapper">\n            <div class="button delete">删&nbsp;&nbsp;除</div>\n            <div class="button confirm">确&nbsp;&nbsp;定</div>\n        </div>\n      </div>\n    ',reset:function(){this.render(),this.renderSongListBox()},render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{songSheet:{name:"",cover:"",brief:"",id:""},songSheetSongs:[]},n=e.songSheet.id?this.template.replace("新建歌单","编辑歌单"):this.template;["name","brief","cover"].map(function(t){n=n.replace("__"+t+"__",e.songSheet[t]||"")}),$(this.el).html(n)},renderSongListBox:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{songSheet:{name:"",cover:"",brief:"",id:""},songSheetSongs:[]};$(this.el).find(".songList-box").empty(),n.songSheetSongs.length?n.songSheetSongs.map(function(n){$(e.el).find(".songList-box").append($('\n                <li class="song">\n                  __songName__\n                  <svg class="icon icon-delete1" aria-hidden="true">\n                    <use xlink:href="#icon-delete1"></use>\n                  </svg>\n                </li>\n              '.replace("__songName__",n.name)).attr("data-song-id",n.id))}):$(this.el).find(".songList-box").append($('<p class="prompt">请选取右列的歌曲加入本歌单</p>'))}},{data:{songSheet:{name:"",cover:"",brief:"",id:""},songSheetSongs:[]},create:function(e){var n=this,t=new(AV.Object.extend("SongSheet"));return t.save(e).then(function(e){var o=e.id,a=e.attributes;i(n.data.songSheet,i({id:o},a)),n.data.songSheetSongs.forEach(function(e){var n=AV.Object.createWithoutData("Song",e.id);n.set("dependent",t),n.save()})})},update:function(e){var n=this,t=AV.Object.createWithoutData("SongSheet",this.data.songSheet.id);return t.set("name",e.name),t.set("cover",e.cover),t.set("brief",e.brief),this.removeDependent(this.data.songSheet.id),t.save().then(function(e){i(n.data.songSheet,i({id:e.id},e.attributes)),n.data.songSheetSongs.forEach(function(e){var n=AV.Object.createWithoutData("Song",e.id);n.set("dependent",t),n.save()})})},delete:function(e){var n=this;return AV.Object.createWithoutData("SongSheet",e.songSheet.id).destroy().then(function(e){return n.data={songSheet:{name:"",cover:"",brief:"",id:""},songSheetSongs:[]},e.id})},removeDependent:function(e){var n=AV.Object.createWithoutData("SongSheet",e),t=new AV.Query("Song");t.equalTo("dependent",n),t.find().then(function(e){e.map(function(e){e=AV.Object.createWithoutData("Song",e.id);var n=AV.Object.createWithoutData("SongSheet","5b2a26779f54540035a990fe");return e.set("dependent",n),e.save()})})}})}},4:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};n.default=function(){({init:function(e,n){this.view=e,this.model=n,this.bindEvents(),this.bindEventHub(),this.getAllSongs()},getAllSongs:function(){var e=this;return this.model.fetch().then(function(){e.view.render(e.model.data)})},bindEvents:function(){var e=this;$(this.view.el).on("click","li",function(n){var t=$(n.currentTarget).attr("data-song-id");if($(n.currentTarget).hasClass("active"))e.model.data.songSheetSongs=e.model.data.songSheetSongs.filter(function(e){return e.id!==t});else{var i=e.model.data.songs.find(function(e){return e.id===t}).name;e.model.data.songSheetSongs.push({id:t,name:i})}e.view.render(e.model.data);var o=JSON.parse(JSON.stringify(e.model.data));window.eventHub.emit("addSong",o)})},bindEventHub:function(){var e=this;window.eventHub.on("deleteSong",function(n){e.model.data.songSheetSongs=n.songSheetSongs,e.view.render(e.model.data)}),window.eventHub.on("selectSongSheet",function(n){e.model.data.songSheetSongs=n.songSheetSongs,e.view.render(e.model.data)}),window.eventHub.on("clearSongListAcitve",function(n){e.model.data.songSheetSongs=n.songSheetSongs,e.view.render(e.model.data)})}}).init({el:".songList",template:'\n      <li>\n        <svg class="icon icon-music" aria-hidden="true">\n          <use xlink:href="#icon-music"></use>\n        </svg>\n        <div class="songInfo">\n          <p title="{{name}}" class="song">{{name}}</p>\n          <p title="{{singer}}" class="singer">\n            <svg class="icon icon-music" aria-hidden="true">\n              <use xlink:href="#icon-geshou"></use>\n            </svg>\n            {{singer}}\n          </p>\n        </div>\n      </li>\n    ',render:function(e){var n=this;$(this.el).empty();var t=e.songs,i=e.songSheetSongs;t.map(function(e){for(var t=$(n.template.replace(/{{name}}/g,e.name).replace(/{{singer}}/g,e.singer)).attr("data-song-id",e.id),o=0;o<i.length;o++)if(i[o].id===e.id){t.addClass("active");break}$(n.el).append(t)})}},{data:{songs:[],songSheetSongs:[]},fetch:function(){var e=this;return new AV.Query("Song").find().then(function(n){e.data.songs=n.map(function(e){return i({id:e.id},e.attributes)})})}})}},5:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};n.default=function(){({init:function(e,n){this.view=e,this.model=n,this.bindEvents(),this.bindEventHub(),this.getAllSongSheets()},getAllSongSheets:function(){var e=this;return this.model.fetch().then(function(){e.view.render(e.model.data)})},bindEvents:function(){var e=this;$(this.view.el).on("click","li",function(n){var t=$(n.currentTarget).attr("data-songSheet-id");e.model.data.selectSongSheetId=t,e.view.render(e.model.data),e.model.findSongSheetSongs(e.model.data.selectSongSheetId).then(function(){var n={};n.songSheetSongs=e.model.data.selectSongSheetSongs;for(var i=e.model.data.songSheets,o=0;o<i.length;o++)if(i[o].id===t){n.songSheet=i[o];break}var a=JSON.parse(JSON.stringify(n));window.eventHub.emit("selectSongSheet",a)})})},bindEventHub:function(){var e=this;window.eventHub.on("creatSongSheetSuccess",function(n){e.model.data.songSheets.push(n.songSheet),e.view.render(e.model.data)}),window.eventHub.on("deleteSongSheet",function(n){e.model.data.songSheets=e.model.data.songSheets.filter(function(e){return e.id!==n.id}),e.model.data.selectSongSheetId=void 0,e.view.render(e.model.data)}),window.eventHub.on("newSongSheet",function(){e.view.clearActive(),e.model.data.selectSongSheetSongs=[],e.model.data.selectSongSheetId=void 0}),window.eventHub.on("updateSongSheet",function(n){for(var t=e.model.data.songSheets,i=0;i<t.length;i++)t[i].id===n.songSheet.id&&(t[i]=n.songSheet);e.view.render(e.model.data)})}}).init({el:".songSheetList",template:'\n      <li>\n        <svg class="icon icon-playlist" aria-hidden="true">\n            <use xlink:href="#icon-playlist"></use>\n        </svg>\n        <p title="{{name}}" class="song">{{name}}</p>\n      </li>\n    ',render:function(e){var n=this;$(this.el).empty();var t=e.songSheets,i=e.selectSongSheetId;t.map(function(e){var t=$(n.template.replace(/{{name}}/g,e.name||"无名歌单")).attr("data-songSheet-id",e.id);e.id===i&&t.addClass("active"),$(n.el).append(t)})},clearActive:function(){$(this.el).find(".active").removeClass("active")}},{data:{songSheets:[],selectSongSheetId:void 0,selectSongSheetSongs:[]},fetch:function(){var e=this;return new AV.Query("SongSheet").find().then(function(n){e.data.songSheets=n.map(function(e){return i({id:e.id},e.attributes)})})},findSongSheetSongs:function(e){var n=this,t=AV.Object.createWithoutData("SongSheet",e),o=new AV.Query("Song");return o.equalTo("dependent",t),o.find().then(function(e){n.data.selectSongSheetSongs=e.map(function(e){return i({id:e.id},e.attributes)})})}})}},6:function(e,n,t){"use strict";t(26);var i=c(t(1)),o=c(t(0)),a=c(t(5)),s=c(t(4)),d=c(t(3)),r=c(t(2));function c(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(),(0,o.default)(),(0,a.default)(),(0,s.default)(),(0,d.default)(),(0,r.default)()}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbW1vbi9ldmVudC1odWIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbW1vbi9hdi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvc29uZ1NoZWV0QWRtaW4vbmV3U29uZ1NoZWV0LmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9zb25nU2hlZXRBZG1pbi9lZGl0U29uZ1NoZWV0LmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9zb25nU2hlZXRBZG1pbi9zb25nTGlzdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvc29uZ1NoZWV0QWRtaW4vc29uZ1NoZWV0TGlzdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvc29uZ1NoZWV0QWRtaW4vc29uZ1NoZWV0QWRtaW5FbnRyeS5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIndpbmRvdyIsImV2ZW50SHViIiwiZXZlbnRzIiwiZW1pdCIsImV2ZW50TmFtZSIsImRhdGEiLCJ0aGlzIiwibWFwIiwiZm4iLCJ1bmRlZmluZWQiLCJvbiIsInB1c2giLCJBViIsImluaXQiLCJhcHBJZCIsImFwcEtleSIsInZpZXciLCJtb2RlbCIsImJpbmRFdmVudHMiLCJiaW5kRXZlbnRIdWIiLCIkIiwiZWwiLCJfdGhpcyIsImRlQWN0aXZlIiwiYWN0aXZlIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInJlbmRlciIsImNyZWF0U29uZ1NoZWV0IiwiX3RoaXM1IiwibmVlZCIsImZpbmQiLCJ2YWwiLCJ0aGVuIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5Iiwic29uZ1NoZWV0IiwiY292ZXIiLCJicmllZiIsImlkIiwic29uZ1NoZWV0U29uZ3MiLCJyZXNldCIsInVwZGF0ZVNvbmdTaGVldCIsIl90aGlzNiIsInVwZGF0ZSIsImRlbGV0ZVNvbmdTaGVldCIsIl90aGlzNyIsImRlbGV0ZSIsIl90aGlzOCIsImUiLCJjdXJyZW50VGFyZ2V0IiwiYXR0ciIsImZpbHRlciIsInNvbmdTaGVldFNvbmciLCJyZW5kZXJTb25nTGlzdEJveCIsIl90aGlzOSIsInRlbXBsYXRlIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiaHRtbCIsInJlcGxhY2UiLCJwbGFjZWhvbGRlciIsImVtcHR5IiwiYXBwZW5kIiwiX3RoaXMyIiwiZXh0ZW5kIiwic2F2ZSIsIm5ld1NvbmdTaGVldCIsImF0dHJpYnV0ZXMiLCJfZXh0ZW5kcyIsImZvckVhY2giLCJzb25nIiwiY3JlYXRlV2l0aG91dERhdGEiLCJzZXQiLCJfdGhpczMiLCJyZW1vdmVEZXBlbmRlbnQiLCJfdGhpczQiLCJkZXN0cm95Iiwic3VjY2VzcyIsInNvbmdTaGVldElkIiwicXVlcnkiLCJRdWVyeSIsImVxdWFsVG8iLCJzb25ncyIsInNvbmdTaGVldDIiLCJnZXRBbGxTb25ncyIsImZldGNoIiwic29uZ0lkIiwiaGFzQ2xhc3MiLCJzb25nTmFtZSIsIiRsaSIsInNpbmdlciIsImdldEFsbFNvbmdTaGVldHMiLCJzZWxlY3RTb25nU2hlZXRJZCIsImZpbmRTb25nU2hlZXRTb25ncyIsInNlbGVjdFNvbmdTaGVldFNvbmdzIiwic29uZ1NoZWV0cyIsImNsZWFyQWN0aXZlIiwiX2F2MiIsImRlZmF1bHQiLCJfZXZlbnRIdWIyIiwiX3NvbmdTaGVldExpc3Qy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YUFNekNyQixNQUNFNEYsY0FDQUgsdUJBQW1CckYsRUFDbkJ1Rix5QkFFRlQsTUFOVSxXQU1ILElBQUF0QixFQUFBM0QsS0FFTCxPQURZLElBQUlNLEdBQUdzRSxNQUFNLGFBQ1puRCxPQUFPRSxLQUFLLFNBQUNnRSxHQUN4QmhDLEVBQUs1RCxLQUFLNEYsV0FBYUEsRUFBVzFGLElBQUksU0FBQzhCLEdBQ3JDLE9BQU9pQyxHQUFlOUIsR0FBSUgsRUFBVUcsSUFBS0gsRUFBVWdDLGlCQUl6RDBCLG1CQWRVLFNBY1NmLEdBQVksSUFBQUwsRUFBQXJFLEtBQ3pCK0IsRUFBWXpCLEdBQUdsQyxPQUFPK0Ysa0JBQWtCLFlBQWFPLEdBQ3JEQyxFQUFRLElBQUlyRSxHQUFHc0UsTUFBTSxRQUV6QixPQURBRCxFQUFNRSxRQUFRLFlBQWE5QyxHQUNwQjRDLEVBQU1sRCxPQUFPRSxLQUFLLFNBQUNtRCxHQUN4QlQsRUFBS3RFLEtBQUsyRixxQkFBdUJaLEVBQU03RSxJQUFJLFNBQUNpRSxHQUMxQyxPQUFPRixHQUFlOUIsR0FBSWdDLEVBQUtoQyxJQUFLZ0MsRUFBS0gsb0RDbERuRHpHLEVBQUEsSUFFQSxRQUFBQSxFQUFBLFFBQ0FBLEVBQUEsUUFDQUEsRUFBQSxRQUNBQSxFQUFBLFFBQ0FBLEVBQUEsUUFDQUEsRUFBQSx3REFFQSxFQUFBdUksRUFBQUMsWUFDQSxFQUFBQyxFQUFBRCxZQUNBLEVBQUFFLEVBQUFGLFlBQ0EsRUFBQUcsRUFBQUgsWUFDQSxFQUFBSSxFQUFBSixZQUNBLEVBQUFLLEVBQUFMIiwiZmlsZSI6ImpzL3NvbmdTaGVldEFkbWluLWJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA2KTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCl7XHJcbiAgLy8g5LqL5Lu25Lit5b+DLCDlj5HluIPorqLpmIXmqKHlvI9cclxuICB3aW5kb3cuZXZlbnRIdWIgPSB7XHJcbiAgICBldmVudHM6IHtcclxuICAgICAgLy8gZXZlbnQxOiBbZm4xLCBmbjIsIC4uLl1cclxuICAgICAgLy8gZXZlbnQyOiBbZm5BLCBmbkIsIC4uLl1cclxuICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG4gICAgZW1pdChldmVudE5hbWUsIGRhdGEpey8v5Y+R5biDKOinpuWPkeS6i+S7tu+8jOmcgOimgeWPkemAgeaVsOaNruiAhemcgOimgeiwg+eUqOWPkeW4gynvvIzmib7liLDpgqPkuKrmobbvvIzmiorph4zpnaLnmoTlh73mlbDlhajpg71jYWxs5LiA6YGN77yMY2FsbOeahOaXtuWAmeW4puS4qmRhdGFcclxuICAgICAgZm9yKGxldCBrZXkgaW4gdGhpcy5ldmVudHMpe1xyXG4gICAgICAgIGlmKGtleSA9PT0gZXZlbnROYW1lKXtcclxuICAgICAgICAgIHRoaXMuZXZlbnRzW2tleV0ubWFwKChmbikgPT4ge1xyXG4gICAgICAgICAgICBmbi5jYWxsKHVuZGVmaW5lZCwgZGF0YSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgb24oZXZlbnROYW1lLCBmbil7Ly/orqLpmIUo5o6l5pS25LqL5Lu277yM5o6l5pS25pWw5o2u6ICF6ZyA6KaB6LCD55So6K6i6ZiFKSzmiorkvaDnmoTlh73mlbDmlL7liLDkuIDkuKrmobbph4zpnaJcclxuICAgICAgaWYodGhpcy5ldmVudHNbZXZlbnROYW1lXSA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgICB0aGlzLmV2ZW50c1tldmVudE5hbWVdID0gW11cclxuICAgICAgfVxyXG4gICAgICB0aGlzLmV2ZW50c1tldmVudE5hbWVdLnB1c2goZm4pXHJcbiAgICB9LFxyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCl7XHJcbiAgbGV0IEFQUF9JRCA9ICdJYktITmxSR1JBRmpZbW16QzFneGh0ZEUtZ3pHem9Ic3onO1xyXG4gIGxldCBBUFBfS0VZID0gJzZTbFFQcUNjeThLd0hWRWhKcEZlQkZwRyc7XHJcbiAgQVYuaW5pdCh7XHJcbiAgICBhcHBJZDogQVBQX0lELFxyXG4gICAgYXBwS2V5OiBBUFBfS0VZXHJcbiAgfSk7XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpe1xyXG4gIGxldCB2aWV3ID0ge1xyXG4gICAgZWw6ICcubmV3U29uZ1NoZWV0JyxcclxuICAgIGFjdGl2ZSgpe1xyXG4gICAgICAkKHRoaXMuZWwpLmFkZENsYXNzKCdhY3RpdmUnKVxyXG4gICAgfSxcclxuICAgIGRlQWN0aXZlKCl7XHJcbiAgICAgICQodGhpcy5lbCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgbGV0IG1vZGVsID0ge1xyXG4gIH1cclxuXHJcbiAgbGV0IGNvbnRyb2xsZXIgPSB7XHJcbiAgICBpbml0KHZpZXcsIG1vZGVsKXtcclxuICAgICAgdGhpcy52aWV3ID0gdmlld1xyXG4gICAgICB0aGlzLm1vZGVsID0gbW9kZWxcclxuICAgICAgdGhpcy5iaW5kRXZlbnRzKClcclxuICAgICAgdGhpcy5iaW5kRXZlbnRIdWIoKVxyXG4gICAgfSxcclxuICAgIGJpbmRFdmVudHMoKXtcclxuICAgICAgJCh0aGlzLnZpZXcuZWwpLm9uKCdjbGljaycsICgpPT57XHJcbiAgICAgICAgd2luZG93LmV2ZW50SHViLmVtaXQoJ25ld1NvbmdTaGVldCcpXHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgYmluZEV2ZW50SHViKCl7XHJcbiAgICAgIHdpbmRvdy5ldmVudEh1Yi5vbignc2VsZWN0U29uZ1NoZWV0JywgKCk9PntcclxuICAgICAgICB0aGlzLnZpZXcuZGVBY3RpdmUoKVxyXG4gICAgICB9KVxyXG4gICAgICB3aW5kb3cuZXZlbnRIdWIub24oJ25ld1NvbmdTaGVldCcsICgpPT57XHJcbiAgICAgICAgdGhpcy52aWV3LmFjdGl2ZSgpXHJcbiAgICAgIH0pXHJcbiAgICAgIHdpbmRvdy5ldmVudEh1Yi5vbignY3JlYXRTb25nU2hlZXRTdWNjZXNzJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMudmlldy5hY3RpdmUoKVxyXG4gICAgICB9KVxyXG4gICAgICB3aW5kb3cuZXZlbnRIdWIub24oJ2RlbGV0ZVNvbmdTaGVldCcsICgpID0+IHtcclxuICAgICAgICB0aGlzLnZpZXcuYWN0aXZlKClcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcbiAgY29udHJvbGxlci5pbml0KHZpZXcsIG1vZGVsKVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKXtcclxuICBsZXQgdmlldyA9IHtcclxuICAgIGVsOiBcIi5lZGl0QXJlYS13cmFwcGVyXCIsXHJcbiAgICB0ZW1wbGF0ZTogYFxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZWRpdEFyZWFcIj5cclxuICAgICAgICA8aDE+5paw5bu65q2M5Y2VPC9oMT5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XHJcbiAgICAgICAgICA8bGFiZWw+5q2M5Y2V5ZCN56ewPC9sYWJlbD5cclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJuYW1lXCIgdmFsdWU9XCJfX25hbWVfX1wiPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cclxuICAgICAgICAgIDxsYWJlbD7mrYzljZXnroDku4s8L2xhYmVsPlxyXG4gICAgICAgICAgPHRleHRhcmVhIG5hbWU9XCJicmllZlwiPl9fYnJpZWZfXzwvdGV4dGFyZWE+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XHJcbiAgICAgICAgICA8bGFiZWw+5bCB6Z2i5aSW6ZO+PC9sYWJlbD5cclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJjb3ZlclwiIHZhbHVlPVwiX19jb3Zlcl9fXCI+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxyXG4gICAgICAgICAgICA8bGFiZWw+5YyF5ZCr5q2M5puyPC9sYWJlbD5cclxuICAgICAgICAgICAgPG9sIGNsYXNzPVwic29uZ0xpc3QtYm94XCI+PC9vbD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiYnV0dG9uLXdyYXBwZXJcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJ1dHRvbiBkZWxldGVcIj7liKAmbmJzcDsmbmJzcDvpmaQ8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJ1dHRvbiBjb25maXJtXCI+56GuJm5ic3A7Jm5ic3A75a6aPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYCxcclxuICAgIHJlc2V0KCl7XHJcbiAgICAgIHRoaXMucmVuZGVyKClcclxuICAgICAgdGhpcy5yZW5kZXJTb25nTGlzdEJveCgpXHJcbiAgICB9LFxyXG4gICAgcmVuZGVyKGRhdGEgPSB7c29uZ1NoZWV0OntuYW1lOicnLGNvdmVyOicnLGJyaWVmOicnLGlkOicnfSwgc29uZ1NoZWV0U29uZ3M6W119KXtcclxuICAgICAgbGV0IHBsYWNlaG9sZGVycyA9IFsnbmFtZScsICdicmllZicsICdjb3ZlciddXHJcbiAgICAgIGxldCBodG1sID0gZGF0YS5zb25nU2hlZXQuaWQgPyB0aGlzLnRlbXBsYXRlLnJlcGxhY2UoJ+aWsOW7uuatjOWNlScsJ+e8lui+keatjOWNlScpIDogdGhpcy50ZW1wbGF0ZVxyXG4gICAgICBcclxuICAgICAgcGxhY2Vob2xkZXJzLm1hcCgocGxhY2Vob2xkZXIpID0+IHtcclxuICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKGBfXyR7cGxhY2Vob2xkZXJ9X19gLCBkYXRhLnNvbmdTaGVldFtwbGFjZWhvbGRlcl0gfHwgJycpLy9kYXRhW3BsYWNlaG9sZGVyXeS4unVuZGVmaW5lZOeahOivneWwseaNouaIkCcnXHJcbiAgICAgIH0pXHJcbiAgICAgICQodGhpcy5lbCkuaHRtbChodG1sKVxyXG4gICAgfSxcclxuICAgIHJlbmRlclNvbmdMaXN0Qm94KGRhdGEgPSB7c29uZ1NoZWV0OntuYW1lOicnLGNvdmVyOicnLGJyaWVmOicnLGlkOicnfSwgc29uZ1NoZWV0U29uZ3M6W119KXtcclxuICAgICAgJCh0aGlzLmVsKS5maW5kKCcuc29uZ0xpc3QtYm94JykuZW1wdHkoKVxyXG4gICAgICBpZihkYXRhLnNvbmdTaGVldFNvbmdzLmxlbmd0aCl7XHJcbiAgICAgICAgZGF0YS5zb25nU2hlZXRTb25ncy5tYXAoKHNvbmdTaGVldFNvbmcpID0+IHtcclxuICAgICAgICAgICQodGhpcy5lbCkuZmluZCgnLnNvbmdMaXN0LWJveCcpLmFwcGVuZChcclxuICAgICAgICAgICAgJChgXHJcbiAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJzb25nXCI+XHJcbiAgICAgICAgICAgICAgICAgIF9fc29uZ05hbWVfX1xyXG4gICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPVwiaWNvbiBpY29uLWRlbGV0ZTFcIiBhcmlhLWhpZGRlbj1cInRydWVcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9XCIjaWNvbi1kZWxldGUxXCI+PC91c2U+XHJcbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICBgLnJlcGxhY2UoJ19fc29uZ05hbWVfXycsIHNvbmdTaGVldFNvbmcubmFtZSlcclxuICAgICAgICAgICAgKS5hdHRyKCdkYXRhLXNvbmctaWQnLCBzb25nU2hlZXRTb25nLmlkKVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgICQodGhpcy5lbCkuZmluZCgnLnNvbmdMaXN0LWJveCcpLmFwcGVuZCgkKCc8cCBjbGFzcz1cInByb21wdFwiPuivt+mAieWPluWPs+WIl+eahOatjOabsuWKoOWFpeacrOatjOWNlTwvcD4nKSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbGV0IG1vZGVsID0ge1xyXG4gICAgZGF0YToge1xyXG4gICAgICBzb25nU2hlZXQ6IHtcclxuICAgICAgICBuYW1lOicnLCBjb3ZlcjonJywgYnJpZWY6JycsIGlkOicnXHJcbiAgICAgIH0sXHJcbiAgICAgIHNvbmdTaGVldFNvbmdzOiBbXVxyXG4gICAgfSxcclxuICAgIGNyZWF0ZShkYXRhKXtcclxuICAgICAgdmFyIFNvbmdTaGVldCA9IEFWLk9iamVjdC5leHRlbmQoJ1NvbmdTaGVldCcpO1xyXG4gICAgICB2YXIgc29uZ1NoZWV0ID0gbmV3IFNvbmdTaGVldCgpXHJcblxyXG4gICAgICByZXR1cm4gc29uZ1NoZWV0LnNhdmUoZGF0YSkudGhlbigobmV3U29uZ1NoZWV0KSA9PiB7XHJcbiAgICAgICAgbGV0IHtpZCwgYXR0cmlidXRlc30gPSBuZXdTb25nU2hlZXRcclxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuZGF0YS5zb25nU2hlZXQsIE9iamVjdC5hc3NpZ24oe2lkOiBpZH0sIGF0dHJpYnV0ZXMpKVxyXG5cclxuICAgICAgICAvL+iuvue9ruWFs+iBlFxyXG4gICAgICAgIHRoaXMuZGF0YS5zb25nU2hlZXRTb25ncy5mb3JFYWNoKChzb25nU2hlZXRTb25nKT0+e1xyXG4gICAgICAgICAgdmFyIHNvbmcgPSBBVi5PYmplY3QuY3JlYXRlV2l0aG91dERhdGEoJ1NvbmcnLCBzb25nU2hlZXRTb25nLmlkKVxyXG4gICAgICAgICAgc29uZy5zZXQoJ2RlcGVuZGVudCcsIHNvbmdTaGVldClcclxuICAgICAgICAgIHNvbmcuc2F2ZSgpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgIH0sXHJcbiAgICB1cGRhdGUoZGF0YSl7XHJcbiAgICAgIHZhciBzb25nU2hlZXQgPSBBVi5PYmplY3QuY3JlYXRlV2l0aG91dERhdGEoJ1NvbmdTaGVldCcsIHRoaXMuZGF0YS5zb25nU2hlZXQuaWQpO1xyXG4gICAgICBzb25nU2hlZXQuc2V0KCduYW1lJywgZGF0YS5uYW1lKTtcclxuICAgICAgc29uZ1NoZWV0LnNldCgnY292ZXInLCBkYXRhLmNvdmVyKTtcclxuICAgICAgc29uZ1NoZWV0LnNldCgnYnJpZWYnLCBkYXRhLmJyaWVmKTtcclxuXHJcbiAgICAgIC8v5YWI6Kej6Zmk5LmL5YmN55qE5L6d6LWWXHJcbiAgICAgIHRoaXMucmVtb3ZlRGVwZW5kZW50KHRoaXMuZGF0YS5zb25nU2hlZXQuaWQpXHJcblxyXG4gICAgICByZXR1cm4gc29uZ1NoZWV0LnNhdmUoKS50aGVuKChuZXdTb25nU2hlZXQpID0+IHtcclxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuZGF0YS5zb25nU2hlZXQsIE9iamVjdC5hc3NpZ24oe2lkOiBuZXdTb25nU2hlZXQuaWR9LCBuZXdTb25nU2hlZXQuYXR0cmlidXRlcykpXHJcbiAgICAgICAgLy/orr7nva7lhbPogZRcclxuICAgICAgICB0aGlzLmRhdGEuc29uZ1NoZWV0U29uZ3MuZm9yRWFjaCgoc29uZ1NoZWV0U29uZyk9PntcclxuICAgICAgICAgIHZhciBzb25nID0gQVYuT2JqZWN0LmNyZWF0ZVdpdGhvdXREYXRhKCdTb25nJywgc29uZ1NoZWV0U29uZy5pZClcclxuICAgICAgICAgIHNvbmcuc2V0KCdkZXBlbmRlbnQnLCBzb25nU2hlZXQpXHJcbiAgICAgICAgICBzb25nLnNhdmUoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgZGVsZXRlKGRhdGEpe1xyXG4gICAgICB2YXIgc29uZ1NoZWV0ID0gQVYuT2JqZWN0LmNyZWF0ZVdpdGhvdXREYXRhKCdTb25nU2hlZXQnLCBkYXRhLnNvbmdTaGVldC5pZClcclxuICAgICAgcmV0dXJuIHNvbmdTaGVldC5kZXN0cm95KCkudGhlbigoc3VjY2VzcykgPT4ge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtzb25nU2hlZXQ6e25hbWU6JycsY292ZXI6JycsYnJpZWY6JycsaWQ6Jyd9LCBzb25nU2hlZXRTb25nczpbXX1cclxuICAgICAgICByZXR1cm4gc3VjY2Vzcy5pZFxyXG4gICAgICB9KVxyXG4gICAgfSxcclxuICAgIHJlbW92ZURlcGVuZGVudChzb25nU2hlZXRJZCl7XHJcbiAgICAgIHZhciBzb25nU2hlZXQgPSBBVi5PYmplY3QuY3JlYXRlV2l0aG91dERhdGEoJ1NvbmdTaGVldCcsIHNvbmdTaGVldElkKTtcclxuICAgICAgdmFyIHF1ZXJ5ID0gbmV3IEFWLlF1ZXJ5KCdTb25nJyk7XHJcbiAgICAgIHF1ZXJ5LmVxdWFsVG8oJ2RlcGVuZGVudCcsIHNvbmdTaGVldCk7XHJcbiAgICAgIHF1ZXJ5LmZpbmQoKS50aGVuKChzb25ncykgPT4ge1xyXG4gICAgICAgIHNvbmdzLm1hcCgoc29uZyk9PntcclxuICAgICAgICAgIHZhciBzb25nID0gQVYuT2JqZWN0LmNyZWF0ZVdpdGhvdXREYXRhKCdTb25nJywgc29uZy5pZCk7XHJcbiAgICAgICAgICB2YXIgc29uZ1NoZWV0MiA9IEFWLk9iamVjdC5jcmVhdGVXaXRob3V0RGF0YSgnU29uZ1NoZWV0JywgJzViMmEyNjc3OWY1NDU0MDAzNWE5OTBmZScpO1xyXG4gICAgICAgICAgc29uZy5zZXQoJ2RlcGVuZGVudCcsIHNvbmdTaGVldDIpO1xyXG4gICAgICAgICAgcmV0dXJuIHNvbmcuc2F2ZSgpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGxldCBjb250cm9sbGVyID0ge1xyXG4gICAgaW5pdCh2aWV3LCBtb2RlbCl7XHJcbiAgICAgIHRoaXMudmlldyA9IHZpZXdcclxuICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsXHJcbiAgICAgIHRoaXMudmlldy5yZW5kZXIodGhpcy5tb2RlbC5kYXRhKVxyXG4gICAgICB0aGlzLmJpbmRFdmVudHMoKVxyXG4gICAgICB0aGlzLmJpbmRFdmVudEh1YigpXHJcbiAgICB9LFxyXG4gICAgY3JlYXRTb25nU2hlZXQoKXtcclxuICAgICAgbGV0IG5lZWRzID0gWyduYW1lJywgJ2JyaWVmJywnY292ZXInXVxyXG4gICAgICBsZXQgZGF0YSA9IHt9XHJcbiAgICAgIG5lZWRzLm1hcCgobmVlZCkgPT4ge1xyXG4gICAgICAgICAgZGF0YVtuZWVkXSA9ICQodGhpcy52aWV3LmVsKS5maW5kKGBbbmFtZT1cIiR7bmVlZH1cIl1gKS52YWwoKVxyXG4gICAgICB9KVxyXG4gICAgICB0aGlzLm1vZGVsLmNyZWF0ZShkYXRhKS50aGVuKCgpID0+IHtcclxuICAgICAgICB3aW5kb3cuZXZlbnRIdWIuZW1pdCgnY3JlYXRTb25nU2hlZXRTdWNjZXNzJywgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLm1vZGVsLmRhdGEpKSlcclxuICAgICAgICB3aW5kb3cuZXZlbnRIdWIuZW1pdCgnY2xlYXJTb25nTGlzdEFjaXR2ZScse3NvbmdTaGVldDp7bmFtZTonJyxjb3ZlcjonJyxicmllZjonJyxpZDonJ30sIHNvbmdTaGVldFNvbmdzOltdfSlcclxuICAgICAgICB0aGlzLnZpZXcucmVzZXQoKVxyXG4gICAgICB9KVxyXG4gICAgfSxcclxuICAgIHVwZGF0ZVNvbmdTaGVldCgpe1xyXG4gICAgICBsZXQgbmVlZHMgPSBbJ25hbWUnLCAnYnJpZWYnLCdjb3ZlciddXHJcbiAgICAgIGxldCBkYXRhID0ge31cclxuICAgICAgbmVlZHMubWFwKChuZWVkKSA9PiB7XHJcbiAgICAgICAgICBkYXRhW25lZWRdID0gJCh0aGlzLnZpZXcuZWwpLmZpbmQoYFtuYW1lPVwiJHtuZWVkfVwiXWApLnZhbCgpXHJcbiAgICAgIH0pXHJcbiAgICAgIHRoaXMubW9kZWwudXBkYXRlKGRhdGEpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIC8v5pu05paw5oiQ5Yqf5ZCO6YCa55+lc29uZy1saXN05pu05pawXHJcbiAgICAgICAgd2luZG93LmV2ZW50SHViLmVtaXQoJ3VwZGF0ZVNvbmdTaGVldCcsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5tb2RlbC5kYXRhKSkpIC8v5ZCM5LiK6Z2i55qE5paw5bu677yM6ZyA6KaB5rex5ou36LSdXHJcbiAgICAgIH0pXHJcblxyXG4gICAgfSxcclxuICAgIGRlbGV0ZVNvbmdTaGVldCgpe1xyXG4gICAgICB0aGlzLm1vZGVsLmRlbGV0ZSh0aGlzLm1vZGVsLmRhdGEpLnRoZW4oKGlkKSA9PiB7XHJcbiAgICAgICAgd2luZG93LmV2ZW50SHViLmVtaXQoJ2RlbGV0ZVNvbmdTaGVldCcsIHtpZDogaWR9KVxyXG4gICAgICAgIHdpbmRvdy5ldmVudEh1Yi5lbWl0KCdjbGVhclNvbmdMaXN0QWNpdHZlJyx7c29uZ1NoZWV0OntuYW1lOicnLGNvdmVyOicnLGJyaWVmOicnLGlkOicnfSwgc29uZ1NoZWV0U29uZ3M6W119KVxyXG4gICAgICAgIHRoaXMudmlldy5yZXNldCgpXHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgYmluZEV2ZW50cygpe1xyXG4gICAgICAkKHRoaXMudmlldy5lbCkub24oJ2NsaWNrJywgJ2xpJywgKGUpPT57XHJcbiAgICAgICAgbGV0IGlkID0gJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtc29uZy1pZCcpXHJcbiAgICAgICAgdGhpcy5tb2RlbC5kYXRhLnNvbmdTaGVldFNvbmdzID0gdGhpcy5tb2RlbC5kYXRhLnNvbmdTaGVldFNvbmdzLmZpbHRlcigoc29uZ1NoZWV0U29uZyk9PntcclxuICAgICAgICAgIHJldHVybiBzb25nU2hlZXRTb25nLmlkICE9PSBpZFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy52aWV3LnJlbmRlclNvbmdMaXN0Qm94KHRoaXMubW9kZWwuZGF0YSlcclxuICAgICAgICB3aW5kb3cuZXZlbnRIdWIuZW1pdCgnZGVsZXRlU29uZycsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5tb2RlbC5kYXRhKSkpXHJcbiAgICAgIH0pXHJcbiAgICAgICQodGhpcy52aWV3LmVsKS5vbignY2xpY2snLCAnLmNvbmZpcm0nLCAoZSkgPT4ge1xyXG4gICAgICAgIGlmKHRoaXMubW9kZWwuZGF0YS5zb25nU2hlZXQuaWQpe1xyXG4gICAgICAgICAgLy9pZOWtmOWcqO+8jOebuOW9k+S6juW3suWtmOWFpeaVsOaNruW6k+eahO+8jOS/ruaUueeahOatjOWNlVxyXG4gICAgICAgICAgdGhpcy51cGRhdGVTb25nU2hlZXQoKVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgLy9pZOS4jeWtmOWcqO+8jOebuOW9k+S6juacquWtmOWFpeaVsOaNruW6k+eahO+8jOaWsOW7uueahOatjOWNlVxyXG4gICAgICAgICAgdGhpcy5jcmVhdFNvbmdTaGVldCgpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAkKHRoaXMudmlldy5lbCkub24oJ2NsaWNrJywgJy5kZWxldGUnLCAoZSkgPT4ge1xyXG4gICAgICAgIGlmKHRoaXMubW9kZWwuZGF0YS5zb25nU2hlZXQuaWQpe1xyXG4gICAgICAgICAgdGhpcy5kZWxldGVTb25nU2hlZXQoKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH0sXHJcbiAgICBiaW5kRXZlbnRIdWIoKXtcclxuICAgICAgd2luZG93LmV2ZW50SHViLm9uKCdhZGRTb25nJywgKGRhdGEpPT57XHJcbiAgICAgICAgdGhpcy5tb2RlbC5kYXRhLnNvbmdTaGVldFNvbmdzID0gZGF0YS5zb25nU2hlZXRTb25nc1xyXG4gICAgICAgIHRoaXMudmlldy5yZW5kZXJTb25nTGlzdEJveCh0aGlzLm1vZGVsLmRhdGEpXHJcbiAgICAgIH0pXHJcbiAgICAgIHdpbmRvdy5ldmVudEh1Yi5vbignc2VsZWN0U29uZ1NoZWV0JywgKGRhdGEpPT57XHJcbiAgICAgICAgdGhpcy5tb2RlbC5kYXRhID0gZGF0YVxyXG4gICAgICAgIHRoaXMudmlldy5yZW5kZXIodGhpcy5tb2RlbC5kYXRhKVxyXG4gICAgICAgIHRoaXMudmlldy5yZW5kZXJTb25nTGlzdEJveCh0aGlzLm1vZGVsLmRhdGEpXHJcbiAgICAgIH0pXHJcbiAgICAgIHdpbmRvdy5ldmVudEh1Yi5vbignbmV3U29uZ1NoZWV0JywoKSA9PiB7XHJcbiAgICAgICAgaWYodGhpcy5tb2RlbC5kYXRhLnNvbmdTaGVldC5pZCl7XHJcbiAgICAgICAgICB0aGlzLm1vZGVsLmRhdGEgPSB7c29uZ1NoZWV0OntuYW1lOicnLGNvdmVyOicnLGJyaWVmOicnLGlkOicnfSwgc29uZ1NoZWV0U29uZ3M6W119XHJcbiAgICAgICAgICB0aGlzLnZpZXcucmVuZGVyKHRoaXMubW9kZWwuZGF0YSlcclxuICAgICAgICAgIHdpbmRvdy5ldmVudEh1Yi5lbWl0KCdjbGVhclNvbmdMaXN0QWNpdHZlJywgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLm1vZGVsLmRhdGEpKSlcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb250cm9sbGVyLmluaXQodmlldywgbW9kZWwpXHJcblxyXG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKXtcclxuICBsZXQgdmlldyA9IHtcclxuICAgIGVsOiBcIi5zb25nTGlzdFwiLFxyXG4gICAgdGVtcGxhdGU6IGBcclxuICAgICAgPGxpPlxyXG4gICAgICAgIDxzdmcgY2xhc3M9XCJpY29uIGljb24tbXVzaWNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj5cclxuICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj1cIiNpY29uLW11c2ljXCI+PC91c2U+XHJcbiAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInNvbmdJbmZvXCI+XHJcbiAgICAgICAgICA8cCB0aXRsZT1cInt7bmFtZX19XCIgY2xhc3M9XCJzb25nXCI+e3tuYW1lfX08L3A+XHJcbiAgICAgICAgICA8cCB0aXRsZT1cInt7c2luZ2VyfX1cIiBjbGFzcz1cInNpbmdlclwiPlxyXG4gICAgICAgICAgICA8c3ZnIGNsYXNzPVwiaWNvbiBpY29uLW11c2ljXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XHJcbiAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPVwiI2ljb24tZ2VzaG91XCI+PC91c2U+XHJcbiAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICB7e3Npbmdlcn19XHJcbiAgICAgICAgICA8L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvbGk+XHJcbiAgICBgLFxyXG4gICAgcmVuZGVyKGRhdGEpe1xyXG4gICAgICAkKHRoaXMuZWwpLmVtcHR5KClcclxuICAgICAgbGV0IHtzb25ncywgc29uZ1NoZWV0U29uZ3N9ID0gZGF0YVxyXG4gICAgICBzb25ncy5tYXAoKHNvbmcpID0+IHtcclxuICAgICAgICBsZXQgJGxpID0gJChcclxuICAgICAgICAgIHRoaXMudGVtcGxhdGUucmVwbGFjZSgve3tuYW1lfX0vZywgc29uZy5uYW1lKVxyXG4gICAgICAgICAgLnJlcGxhY2UoL3t7c2luZ2VyfX0vZywgc29uZy5zaW5nZXIpXHJcbiAgICAgICAgKS5hdHRyKCdkYXRhLXNvbmctaWQnLCBzb25nLmlkKVxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzb25nU2hlZXRTb25ncy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICBpZihzb25nU2hlZXRTb25nc1tpXS5pZCA9PT0gc29uZy5pZCl7XHJcbiAgICAgICAgICAgICRsaS5hZGRDbGFzcygnYWN0aXZlJylcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgJCh0aGlzLmVsKS5hcHBlbmQoJGxpKVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbGV0IG1vZGVsID0ge1xyXG4gICAgZGF0YToge1xyXG4gICAgICBzb25nczogW10sXHJcbiAgICAgIHNvbmdTaGVldFNvbmdzOiBbXVxyXG4gICAgfSxcclxuICAgIGZldGNoKCl7XHJcbiAgICAgIHZhciBxdWVyeSA9IG5ldyBBVi5RdWVyeSgnU29uZycpO1xyXG4gICAgICByZXR1cm4gcXVlcnkuZmluZCgpLnRoZW4oKHNvbmdzKSA9PiB7XHJcbiAgICAgICAgdGhpcy5kYXRhLnNvbmdzID0gc29uZ3MubWFwKChzb25nKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7aWQ6IHNvbmcuaWR9LCBzb25nLmF0dHJpYnV0ZXMpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGxldCBjb250cm9sbGVyID0ge1xyXG4gICAgaW5pdCh2aWV3LCBtb2RlbCl7XHJcbiAgICAgIHRoaXMudmlldyA9IHZpZXdcclxuICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsXHJcbiAgICAgIHRoaXMuYmluZEV2ZW50cygpXHJcbiAgICAgIHRoaXMuYmluZEV2ZW50SHViKClcclxuICAgICAgdGhpcy5nZXRBbGxTb25ncygpXHJcbiAgICB9LFxyXG4gICAgZ2V0QWxsU29uZ3MoKXtcclxuICAgICAgcmV0dXJuIHRoaXMubW9kZWwuZmV0Y2goKS50aGVuKCgpID0+IHtcclxuICAgICAgICB0aGlzLnZpZXcucmVuZGVyKHRoaXMubW9kZWwuZGF0YSlcclxuICAgICAgfSlcclxuICAgIH0sXHJcbiAgICBiaW5kRXZlbnRzKCl7XHJcbiAgICAgICQodGhpcy52aWV3LmVsKS5vbignY2xpY2snLCAnbGknLCAoZSkgPT4ge1xyXG4gICAgICAgIGxldCBzb25nSWQgPSAkKGUuY3VycmVudFRhcmdldCkuYXR0cignZGF0YS1zb25nLWlkJylcclxuICAgICAgICBsZXQgaXNBY3RpdmUgPSAkKGUuY3VycmVudFRhcmdldCkuaGFzQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgICAgaWYoIWlzQWN0aXZlKXtcclxuICAgICAgICAgIGxldCBzb25nTmFtZSA9IHRoaXMubW9kZWwuZGF0YS5zb25ncy5maW5kKChzb25nKT0+e1xyXG4gICAgICAgICAgICByZXR1cm4gc29uZy5pZCA9PT0gc29uZ0lkXHJcbiAgICAgICAgICB9KS5uYW1lXHJcbiAgICAgICAgICB0aGlzLm1vZGVsLmRhdGEuc29uZ1NoZWV0U29uZ3MucHVzaCh7aWQ6IHNvbmdJZCwgbmFtZTogc29uZ05hbWV9KVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgdGhpcy5tb2RlbC5kYXRhLnNvbmdTaGVldFNvbmdzID0gdGhpcy5tb2RlbC5kYXRhLnNvbmdTaGVldFNvbmdzLmZpbHRlcigoc29uZ1NoZWV0U29uZyk9PntcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc29uZ1NoZWV0U29uZylcclxuICAgICAgICAgICAgcmV0dXJuIHNvbmdTaGVldFNvbmcuaWQgIT09IHNvbmdJZFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudmlldy5yZW5kZXIodGhpcy5tb2RlbC5kYXRhKVxyXG4gICAgICAgIGxldCBvYmplY3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMubW9kZWwuZGF0YSkpXHJcbiAgICAgICAgd2luZG93LmV2ZW50SHViLmVtaXQoJ2FkZFNvbmcnLCBvYmplY3QpXHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgYmluZEV2ZW50SHViKCl7XHJcbiAgICAgIHdpbmRvdy5ldmVudEh1Yi5vbignZGVsZXRlU29uZycsIChkYXRhKT0+e1xyXG4gICAgICAgIHRoaXMubW9kZWwuZGF0YS5zb25nU2hlZXRTb25ncyA9ICBkYXRhLnNvbmdTaGVldFNvbmdzXHJcbiAgICAgICAgdGhpcy52aWV3LnJlbmRlcih0aGlzLm1vZGVsLmRhdGEpXHJcbiAgICAgIH0pXHJcbiAgICAgIHdpbmRvdy5ldmVudEh1Yi5vbignc2VsZWN0U29uZ1NoZWV0JywgKGRhdGEpPT57XHJcbiAgICAgICAgdGhpcy5tb2RlbC5kYXRhLnNvbmdTaGVldFNvbmdzID0gZGF0YS5zb25nU2hlZXRTb25nc1xyXG4gICAgICAgIHRoaXMudmlldy5yZW5kZXIodGhpcy5tb2RlbC5kYXRhKVxyXG4gICAgICB9KVxyXG4gICAgICB3aW5kb3cuZXZlbnRIdWIub24oJ2NsZWFyU29uZ0xpc3RBY2l0dmUnLCAoZGF0YSk9PntcclxuICAgICAgICB0aGlzLm1vZGVsLmRhdGEuc29uZ1NoZWV0U29uZ3MgPSBkYXRhLnNvbmdTaGVldFNvbmdzXHJcbiAgICAgICAgdGhpcy52aWV3LnJlbmRlcih0aGlzLm1vZGVsLmRhdGEpXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb250cm9sbGVyLmluaXQodmlldywgbW9kZWwpXHJcblxyXG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKXtcclxuICBsZXQgdmlldyA9IHtcclxuICAgIGVsOiAnLnNvbmdTaGVldExpc3QnLFxyXG4gICAgdGVtcGxhdGU6IGBcclxuICAgICAgPGxpPlxyXG4gICAgICAgIDxzdmcgY2xhc3M9XCJpY29uIGljb24tcGxheWxpc3RcIiBhcmlhLWhpZGRlbj1cInRydWVcIj5cclxuICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPVwiI2ljb24tcGxheWxpc3RcIj48L3VzZT5cclxuICAgICAgICA8L3N2Zz5cclxuICAgICAgICA8cCB0aXRsZT1cInt7bmFtZX19XCIgY2xhc3M9XCJzb25nXCI+e3tuYW1lfX08L3A+XHJcbiAgICAgIDwvbGk+XHJcbiAgICBgLFxyXG4gICAgcmVuZGVyKGRhdGEpe1xyXG4gICAgICAkKHRoaXMuZWwpLmVtcHR5KClcclxuICAgICAgbGV0IHtzb25nU2hlZXRzLCBzZWxlY3RTb25nU2hlZXRJZH0gPSBkYXRhXHJcbiAgICAgIHNvbmdTaGVldHMubWFwKChzb25nU2hlZXQpPT57XHJcbiAgICAgICAgbGV0ICRsaSA9ICQoXHJcbiAgICAgICAgICB0aGlzLnRlbXBsYXRlLnJlcGxhY2UoL3t7bmFtZX19L2csIHNvbmdTaGVldC5uYW1lfHwn5peg5ZCN5q2M5Y2VJylcclxuICAgICAgICApLmF0dHIoJ2RhdGEtc29uZ1NoZWV0LWlkJywgc29uZ1NoZWV0LmlkKVxyXG4gICAgICAgIGlmKHNvbmdTaGVldC5pZCA9PT0gc2VsZWN0U29uZ1NoZWV0SWQpe1xyXG4gICAgICAgICAgJGxpLmFkZENsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAgIH1cclxuICAgICAgICAkKHRoaXMuZWwpLmFwcGVuZCgkbGkpXHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgY2xlYXJBY3RpdmUoKXtcclxuICAgICAgJCh0aGlzLmVsKS5maW5kKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgbGV0IG1vZGVsID0ge1xyXG4gICAgZGF0YToge1xyXG4gICAgICBzb25nU2hlZXRzOiBbXSxcclxuICAgICAgc2VsZWN0U29uZ1NoZWV0SWQ6IHVuZGVmaW5lZCxcclxuICAgICAgc2VsZWN0U29uZ1NoZWV0U29uZ3M6IFtdXHJcbiAgICB9LFxyXG4gICAgZmV0Y2goKXtcclxuICAgICAgdmFyIHF1ZXJ5ID0gbmV3IEFWLlF1ZXJ5KCdTb25nU2hlZXQnKTtcclxuICAgICAgcmV0dXJuIHF1ZXJ5LmZpbmQoKS50aGVuKChzb25nU2hlZXRzKSA9PiB7XHJcbiAgICAgICAgdGhpcy5kYXRhLnNvbmdTaGVldHMgPSBzb25nU2hlZXRzLm1hcCgoc29uZ1NoZWV0KSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7aWQ6IHNvbmdTaGVldC5pZH0sIHNvbmdTaGVldC5hdHRyaWJ1dGVzKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgZmluZFNvbmdTaGVldFNvbmdzKHNvbmdTaGVldElkKXtcclxuICAgICAgdmFyIHNvbmdTaGVldCA9IEFWLk9iamVjdC5jcmVhdGVXaXRob3V0RGF0YSgnU29uZ1NoZWV0Jywgc29uZ1NoZWV0SWQpO1xyXG4gICAgICB2YXIgcXVlcnkgPSBuZXcgQVYuUXVlcnkoJ1NvbmcnKTtcclxuICAgICAgcXVlcnkuZXF1YWxUbygnZGVwZW5kZW50Jywgc29uZ1NoZWV0KTtcclxuICAgICAgcmV0dXJuIHF1ZXJ5LmZpbmQoKS50aGVuKChzb25ncykgPT4ge1xyXG4gICAgICAgIHRoaXMuZGF0YS5zZWxlY3RTb25nU2hlZXRTb25ncyA9IHNvbmdzLm1hcCgoc29uZyk9PntcclxuICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHtpZDogc29uZy5pZH0sIHNvbmcuYXR0cmlidXRlcylcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbGV0IGNvbnRyb2xsZXIgPSB7XHJcbiAgICBpbml0KHZpZXcsIG1vZGVsKXtcclxuICAgICAgdGhpcy52aWV3ID0gdmlld1xyXG4gICAgICB0aGlzLm1vZGVsID0gbW9kZWxcclxuICAgICAgdGhpcy5iaW5kRXZlbnRzKClcclxuICAgICAgdGhpcy5iaW5kRXZlbnRIdWIoKVxyXG4gICAgICB0aGlzLmdldEFsbFNvbmdTaGVldHMoKVxyXG4gICAgfSxcclxuICAgIGdldEFsbFNvbmdTaGVldHMoKXtcclxuICAgICAgcmV0dXJuIHRoaXMubW9kZWwuZmV0Y2goKS50aGVuKCgpID0+IHtcclxuICAgICAgICB0aGlzLnZpZXcucmVuZGVyKHRoaXMubW9kZWwuZGF0YSlcclxuICAgICAgfSlcclxuICAgIH0sXHJcbiAgICBiaW5kRXZlbnRzKCl7XHJcbiAgICAgICQodGhpcy52aWV3LmVsKS5vbignY2xpY2snLCAnbGknLCAoZSkgPT4ge1xyXG4gICAgICAgIGxldCBzb25nU2hlZXRJZCA9ICQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdkYXRhLXNvbmdTaGVldC1pZCcpXHJcbiAgICAgICAgdGhpcy5tb2RlbC5kYXRhLnNlbGVjdFNvbmdTaGVldElkID0gc29uZ1NoZWV0SWRcclxuICAgICAgICB0aGlzLnZpZXcucmVuZGVyKHRoaXMubW9kZWwuZGF0YSlcclxuICAgICAgICB0aGlzLm1vZGVsLmZpbmRTb25nU2hlZXRTb25ncyh0aGlzLm1vZGVsLmRhdGEuc2VsZWN0U29uZ1NoZWV0SWQpLnRoZW4oKCk9PntcclxuICAgICAgICAgIGxldCBkYXRhID0ge31cclxuICAgICAgICAgIGRhdGFbJ3NvbmdTaGVldFNvbmdzJ10gPSB0aGlzLm1vZGVsLmRhdGEuc2VsZWN0U29uZ1NoZWV0U29uZ3NcclxuICAgICAgICAgIGxldCBzb25nU2hlZXRzID0gdGhpcy5tb2RlbC5kYXRhLnNvbmdTaGVldHNcclxuICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzb25nU2hlZXRzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgaWYoc29uZ1NoZWV0c1tpXS5pZCA9PT0gc29uZ1NoZWV0SWQpe1xyXG4gICAgICAgICAgICAgIGRhdGFbJ3NvbmdTaGVldCddID0gc29uZ1NoZWV0c1tpXVxyXG4gICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxldCBvYmplY3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRhdGEpKVxyXG4gICAgICAgICAgd2luZG93LmV2ZW50SHViLmVtaXQoJ3NlbGVjdFNvbmdTaGVldCcsIG9iamVjdClcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG4gICAgfSxcclxuICAgIGJpbmRFdmVudEh1Yigpe1xyXG4gICAgICB3aW5kb3cuZXZlbnRIdWIub24oJ2NyZWF0U29uZ1NoZWV0U3VjY2VzcycsIChkYXRhKT0+e1xyXG4gICAgICAgIHRoaXMubW9kZWwuZGF0YS5zb25nU2hlZXRzLnB1c2goZGF0YS5zb25nU2hlZXQpXHJcbiAgICAgICAgdGhpcy52aWV3LnJlbmRlcih0aGlzLm1vZGVsLmRhdGEpXHJcbiAgICAgIH0pXHJcbiAgICAgIHdpbmRvdy5ldmVudEh1Yi5vbignZGVsZXRlU29uZ1NoZWV0JywgKGRhdGEpPT57XHJcbiAgICAgICAgdGhpcy5tb2RlbC5kYXRhLnNvbmdTaGVldHMgPSB0aGlzLm1vZGVsLmRhdGEuc29uZ1NoZWV0cy5maWx0ZXIoKHNvbmdTaGVldCkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIHNvbmdTaGVldC5pZCAhPT0gZGF0YS5pZFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5tb2RlbC5kYXRhLnNlbGVjdFNvbmdTaGVldElkID0gdW5kZWZpbmVkXHJcbiAgICAgICAgdGhpcy52aWV3LnJlbmRlcih0aGlzLm1vZGVsLmRhdGEpXHJcbiAgICAgIH0pXHJcbiAgICAgIHdpbmRvdy5ldmVudEh1Yi5vbignbmV3U29uZ1NoZWV0JywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMudmlldy5jbGVhckFjdGl2ZSgpXHJcbiAgICAgICAgdGhpcy5tb2RlbC5kYXRhLnNlbGVjdFNvbmdTaGVldFNvbmdzID0gW11cclxuICAgICAgICB0aGlzLm1vZGVsLmRhdGEuc2VsZWN0U29uZ1NoZWV0SWQgPSB1bmRlZmluZWRcclxuICAgICAgfSlcclxuICAgICAgd2luZG93LmV2ZW50SHViLm9uKCd1cGRhdGVTb25nU2hlZXQnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgIGxldCBzb25nU2hlZXRzID0gdGhpcy5tb2RlbC5kYXRhLnNvbmdTaGVldHNcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgc29uZ1NoZWV0cy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICBpZihzb25nU2hlZXRzW2ldLmlkID09PSBkYXRhLnNvbmdTaGVldC5pZCl7XHJcbiAgICAgICAgICAgIHNvbmdTaGVldHNbaV0gPSBkYXRhLnNvbmdTaGVldFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnZpZXcucmVuZGVyKHRoaXMubW9kZWwuZGF0YSlcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnRyb2xsZXIuaW5pdCh2aWV3LCBtb2RlbClcclxufSIsImltcG9ydCAnLi4vLi4vY3NzL3NvbmdTaGVldEFkbWluLmNzcydcclxuXHJcbmltcG9ydCBhdiBmcm9tICcuLi9jb21tb24vYXYnXHJcbmltcG9ydCBldmVudEh1YiBmcm9tICcuLi9jb21tb24vZXZlbnQtaHViJ1xyXG5pbXBvcnQgc29uZ1NoZWV0TGlzdCBmcm9tICcuL3NvbmdTaGVldExpc3QnXHJcbmltcG9ydCBzb25nTGlzdCBmcm9tICcuL3NvbmdMaXN0J1xyXG5pbXBvcnQgZWRpdFNvbmdTaGVldCBmcm9tICcuL2VkaXRTb25nU2hlZXQnXHJcbmltcG9ydCBuZXdTb25nU2hlZXQgZnJvbSAnLi9uZXdTb25nU2hlZXQnXHJcblxyXG5hdigpXHJcbmV2ZW50SHViKClcclxuc29uZ1NoZWV0TGlzdCgpXHJcbnNvbmdMaXN0KClcclxuZWRpdFNvbmdTaGVldCgpXHJcbm5ld1NvbmdTaGVldCgpIl0sInNvdXJjZVJvb3QiOiIifQ==